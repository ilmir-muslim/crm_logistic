<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{{ title }}</title>
  </head>
  <body>
    <div class="header">
      <h1>{{ title }}</h1>
    </div>

    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-label">Всего заявок</div>
        <div class="stat-value">{{ stats.total }}</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Готова к выдаче</div>
        <div class="stat-value">{{ stats.ready }}</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">На оплате</div>
        <div class="stat-value">{{ stats.payment }}</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Общий вес</div>
        <div class="stat-value">
          {{ stats.total_weight|default:0|floatformat:0 }} кг
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Общий объем</div>
        <div class="stat-value">
          {{ stats.total_volume|default:0|floatformat:1 }} м³
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Общее количество мест</div>
        <div class="stat-value">{{ stats.total_quantity }}</div>
      </div>
    </div>

    <h2>Детализация заявок</h2>
    <table>
      <thead>
        <tr>
          <th>№</th>
          <th>Номер</th>
          <th>Клиент</th>
          <th>Адрес</th>
          <th>Дата забора</th>
          <th>Места</th>
          <th>Вес, кг</th>
          <th>Объем, м³</th>
          <th>Статус</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ order.tracking_number|default:"#"|add:order.id }}</td>
          <td>{{ order.client_name|truncatechars:20 }}</td>
          <td>{{ order.pickup_address|truncatechars:30 }}</td>
          <td>{{ order.pickup_date|date:"d.m.Y" }}</td>
          <td>{{ order.quantity }}</td>
          <td>{{ order.weight|default:"—" }}</td>
          <td>{{ order.volume|default:"—" }}</td>
          <td>{{ order.get_status_display }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="9" class="text-center">Нет заявок за выбранную дату</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="footer">
      <p>
        Отчет сгенерирован {{ now|date:"d.m.Y H:i" }} | Всего позиций: {{
        stats.total }}
      </p>
    </div>
  </body>
</html>
